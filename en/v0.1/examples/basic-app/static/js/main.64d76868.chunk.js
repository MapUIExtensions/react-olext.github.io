(this["webpackJsonpreact-olext"]=this["webpackJsonpreact-olext"]||[]).push([[0],{177:function(e,t,n){},277:function(e,t,n){},336:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},346:function(e,t,n){},347:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){},433:function(e,t,n){},434:function(e,t,n){},437:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),o=n(80),i=n.n(o),l=(n(336),n(12)),s=n(22),u=(n(177),n.p+"static/media/react-olext_logo.dc1c73a5.svg"),b=function(e){var t=e.logo,n=void 0===t?u:t,r=e.style,c=void 0===r?{paddingLeft:"10px",paddingBottom:"5px",paddingTop:"5px"}:r,o=e.alt,i=void 0===o?"logo":o,l=e.width,s=void 0===l?void 0:l,b=e.height,j=void 0===b?void 0:b;return Object(a.jsx)("div",{className:"rolext-header-logo",style:c,children:Object(a.jsx)("img",{src:n,alt:i,width:s,height:j})})},j=function(e){var t=e.style,n=void 0===t?null:t,r=e.children;return Object(a.jsx)("h1",{className:"rolext-header-title-sub",style:n,children:r})},d=function(e){var t=e.style,n=void 0===t?null:t,r=e.children;return Object(a.jsx)("div",{className:"rolext-header-title",style:n,children:r})};d.MainTitle=function(e){var t=e.style,n=void 0===t?null:t,r=e.children;return Object(a.jsx)("h1",{className:"rolext-header-title-main",style:n,children:r})},d.SubTitle=j;var O=d,f=function(e){var t=e.style,n=void 0===t?null:t,r=e.children;return Object(a.jsx)("div",{className:"rolext-header-content",style:n,children:r})},m=function(e){var t=e.style,n=void 0===t?null:t,r=e.children,c=Object(s.a)(e,["style","children"]);return Object(a.jsx)("div",Object(l.a)(Object(l.a)({className:"rolext-header-container",style:n},c),{},{children:r}))};m.Logo=b,m.Title=O,m.Content=f;var p=m,h=n(54),g=n(286),v=function(e){var t=e.map,n=e.style,c=void 0===n?void 0:n,o=e.className,i=void 0===o?void 0:o,u=e.coordinateFormatFunc,b=void 0===u?function(e,t){var n=e.getView().getProjection().getAxisOrientation();return function(e){var a="{x}, {y}";return"neu"===n&&(a="{y}, {x}"),Object(h.g)(e,a,t)}}(t,2):u,j=Object(s.a)(e,["map","style","className","coordinateFormatFunc"]),d=Object(r.useRef)();return Object(r.useEffect)((function(){var e=new g.a({className:"custom-mouse-position",target:d.current,coordinateFormat:b,undefinedHTML:"&nbsp;"});return t.addControl(e),function(){return t.removeControl(e)}}),[t,b]),Object(a.jsx)("span",Object(l.a)({ref:d,className:i,style:c},j))},y=n(19),x=n(9),w=function(e){var t=e.map,n=e.style,c=void 0===n?void 0:n,o=e.className,i=void 0===o?void 0:o,u=Object(s.a)(e,["map","style","className"]),b=Object(r.useState)(null),j=Object(y.a)(b,2),d=j[0],O=j[1],f=Object(r.useCallback)((function(e){if(e){var n=e.target.get("resolution"),a=t.getView().getProjection().getUnits(),r=n*x.a[a]*39.37*(25.4/.28);r=r>=9500&&r<=95e4?Math.round(r/1e3)+"K":r>=95e4?Math.round(r/1e6)+"M":Math.round(r),O(r)}}),[t]);return Object(r.useEffect)((function(){return t.getView().on("change:resolution",f),function(){return t.getView().un("change:resolution",f)}}),[t,f]),Object(a.jsx)("span",Object(l.a)(Object(l.a)({style:c,className:i},u),{},{children:d}))},S=function(e){var t=e.map,n=e.style,r=e.logo,c=void 0===r?u:r,o=e.mainTitle,i=void 0===o?"React-Olext":o,b=e.subTitle,j=void 0===b?"Components for OpenLayers":b,d=Object(s.a)(e,["map","style","logo","mainTitle","subTitle"]);return Object(a.jsxs)(p,Object(l.a)(Object(l.a)({style:n},d),{},{children:[Object(a.jsx)(p.Logo,{logo:c}),Object(a.jsxs)(p.Title,{children:[Object(a.jsx)(p.Title.MainTitle,{children:i}),Object(a.jsx)(p.Title.SubTitle,{children:j})]}),Object(a.jsxs)(p.Content,{children:[Object(a.jsx)("div",{children:"Pos:"}),Object(a.jsx)(v,{map:t,style:{color:"white",width:"160px"}}),Object(a.jsx)("div",{children:"Scale: 1/"}),Object(a.jsx)(w,{map:t,style:{color:"white",width:"100px"}})]})]}))},C=function(e){var t=e.map,n=e.height,c=void 0===n?"100%":n,o=e.width,i=void 0===o?"100%":o,l=e.children,s=Object(r.useRef)();return Object(r.useEffect)((function(){return t.setTarget(s.current),function(){return t.setTarget(void 0)}}),[t]),Object(a.jsx)("div",{ref:s,style:{height:c,width:i},children:l})};C.Controls=function(e){e.map;var t=e.children;return Object(a.jsx)("div",{children:t})};var k=C,L=n(134),E=n(75),F=n(99),T=n(104),R=n(106),N=n(73),I=n(287),P=n(8),A=function(e){var t=e&&e.getSize(),n=t&&t[0],a=t&&t[1];if(t&&!isNaN(n)&&!isNaN(a)){var r=[];if([[0,0],[n,0],[n,a],[0,a],[0,0]].forEach((function(t){var n=e.getCoordinateFromPixel(t);if(null===n)return!1;r.push(n)})),5===r.length)return{extent:new N.a([r]),topLeft:new R.a(r[0])}}},_=function(e){var t=e.map,n=e.parentMap,c=e.anchorStyle,o=void 0===c?null:c,i=e.boxStyle,l=void 0===i?null:i,s=e.magnification,u=void 0===s?5:s,b=e.height,j=void 0===b?"100%":b,d=e.width,O=void 0===d?"100%":d,f=Object(r.useRef)(),m=Object(r.useState)(t)[0],p=Object(r.useState)(new L.a)[0],h=Object(r.useState)(new L.a)[0],g=Object(r.useState)(new F.a({source:new T.a}))[0],v=Object(r.useState)(null),w=Object(y.a)(v,2),S=w[0],C=w[1],k=Object(r.useCallback)((function(e){if(m){var t=n.getView(),a=t.getProjection(),r=m.getView(),c=r.getProjection(),o=t.getCenter();if("center"===e&&(Object(x.h)(a,c)||(o=Object(x.v)(o,a,c)),r.set("center",o)),"resolution"===e)if(Object(x.h)(a,c))r.set("resolution",u*t.getResolution());else{var i=t.calculateExtent(n.getSize()),l=Object(x.w)(i,a,c);r.fit(l,{constrainResolution:!1}),r.set("resolution",u()*r.getResolution())}}}),[m,n,u]),N=Object(r.useCallback)((function(e){"center"!==e.key&&"resolution"!==e.key||k(e.key)}),[k]),_=Object(r.useCallback)((function(){if(m){var e=A(n);if(e){var t=e.extent,a=e.topLeft,r=n.getView().getProjection(),c=m.getView().getProjection();Object(x.h)(r,c)||(t.transform(r,c),a.transform(r,c)),p.setGeometry(t),h.setGeometry(a)}}}),[m,n,p,h]),G=Object(r.useCallback)((function(){n&&n.on("postrender",_)}),[n,_]),M=Object(r.useCallback)((function(){n&&n.un("postrender",_)}),[n,_]),V=Object(r.useCallback)((function(){var e=p.getGeometry().getCoordinates()[0][0],t=new R.a(e);h.setGeometry(t)}),[h,p]),z=Object(r.useCallback)((function(){if(m){var e=n.getView(),t=e.getProjection(),a=m.getView().getProjection(),r=p.getGeometry().getExtent(),c=Object(P.w)(r);Object(x.h)(t,a)||(c=Object(x.v)(c,a,t)),e.animate({center:c})}}),[n,m,p]),q=Object(r.useCallback)((function(){if(m&&!S){var e=new I.a({features:new E.a([p])});m.addInteraction(e),e.setActive(!0),e.on("translatestart",M),e.on("translating",V),e.on("translateend",z),e.on("translateend",G),C(e)}}),[p,m,G,S,M,V,z]),D=Object(r.useCallback)((function(){m&&S&&(S.setActive(!1),m.removeInteraction(S),S.un("translatestart",M),S.un("translating",V),S.un("translateend",z),S.un("translateend",G),C(null))}),[S,m,M,V,z,G]),B=Object(r.useCallback)((function(e){if(m){var t=n.getView(),a=t.getProjection(),r=m.getView().getProjection(),c=e.coordinate;Object(x.h)(a,r)||(c=Object(x.v)(c,r,a)),t.animate({center:c})}}),[m,n]),U=Object(r.useCallback)((function(e){m&&(m.updateSize(),k("resolution"),k("center"))}),[k,m]);return Object(r.useEffect)((function(){if(m)return m.addLayer(g),m.setTarget(f.current),k("resolution"),window.addEventListener("resize",U),function(){m&&(m.removeLayer(g),m.setTarget(void 0),window.removeEventListener("resize",U))}}),[m,g,k,U]),Object(r.useEffect)((function(){return n.getView().on("propertychange",N),function(){n.getView().un("propertychange",N)}}),[n,N]),Object(r.useEffect)((function(){return G(),function(){return M()}}),[G,M]),Object(r.useEffect)((function(){k("center"),k("resolution")}),[k]),Object(r.useEffect)((function(){g.getSource().addFeatures([p,h]),o&&h.setStyle(o),l&&p.setStyle(l)}),[g,h,p,l,o]),Object(r.useEffect)((function(){return q(),function(){return D()}}),[q,D]),Object(r.useEffect)((function(){if(m)return m.on("click",B),function(){return m.un("click",B)}}),[m,B]),Object(a.jsx)("div",{ref:f,style:{height:j,width:O}})},G=n(318),M=(n(340),function(e){return Object(a.jsx)(G.a,Object(l.a)(Object(l.a)({},e),{},{children:e.children}))}),V=n(168),z=n(169),q=n(210),D=n(288),B=n(192),U=n(137),Z=n(195),Y=n(42),H=n(143),W=n(222),X=n(279),Q=n(110);W.a.defs("EPSG:31370","+proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl +towgs84=-106.869,52.2978,-103.724,0.3366,-0.457,1.8422,-1.2747 +units=m +no_defs"),Object(X.a)(W.a);Object(Q.c)("EPSG:31370");function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=e.getLayers().getArray(),a=[];return n.forEach((function(e){e instanceof Y.b&&K(e).forEach((function(e){t(e)&&a.push(e)})),t(e)&&a.push(e)})),a}var J=function e(t,n){var a=n instanceof Y.b?n:n.getLayerGroup(),r=a.getLayers().getArray(),c={position:r.length-1,groupLayer:a};return r.indexOf(t)<0?r.forEach((function(n){n instanceof Y.b&&(c=e(t,n))})):(c.position=r.indexOf(t),c.groupLayer=a),c},$=function(e,t){var n=e.getView().getProjection().getUnits();return t/(39.37*x.a[n]*(25.4/.28))},ee=function(e,t){if(null!==t&&void 0!==t&&t[0]!==1/0){if(e.getView().fit(t,e.getSize()),function(e,t){var n=e.getView().getProjection().getUnits();return t*(39.37*x.a[n]*(25.4/.28))}(e,e.getView().getResolution())<500){var n=$(e,500);e.getView().setResolution(n)}}else alert("No Coordinates")},te=function(e,t){if(t.getSource().getFeatures().length>0){var n=t.getSource().getExtent();ee(e,n)}},ne=function e(t){var n=[];return t.forEach((function(t){t instanceof Y.b?n=n.concat(e(t.getLayers())):t.get("visible")&&n.push(t)})),n},ae=function(e,t,n){var a=Object(h.d)(8),r=Object(x.v)(e,t,n);return"neu"===Object(Q.c)(n).getAxisOrientation()&&r.reverse(),a(r)},re=function(e,t){var n=Object(Q.c)(t),a=void 0;return e&&2===e.split(",").length&&(a=e.split(",").map((function(e){return parseFloat(e.trim())})),"neu"===n.getAxisOrientation()&&a.reverse()),a},ce=function(e){var t=Object(Q.c)(e),n="X",a="Y",r=t.getUnits();if("degrees"===r&&(n="LONG",a="LAT"),"neu"===t.getAxisOrientation()){var c=[a,n];n=c[0],a=c[1]}return"".concat(n,", ").concat(a," (").concat(r,")")},oe=n(313),ie=n(175),le=n(451),se=n(450),ue=n(449),be=n(448),je=n(317),de=n(163),Oe=(n(341),c.a.memo((function(e){var t=e.overlay,n=(e.node,e.xPos),r=e.yPos,c=e.showMenu,o=void 0!==c&&c?{visibility:"visible"}:{visibility:"hidden",height:0};return Object(a.jsx)("div",{mode:"vertical",className:"rolext-tree-context-menu",style:Object(l.a)(Object(l.a)({},o),{},{top:r,left:n}),children:t})}))),fe=n(147),me=n(306),pe=n.n(me),he=n(196),ge=n(198),ve=(n(346),function(e){var t=e.collapsible,n=void 0===t||t,r=e.preTools,c=e.postTools,o=e.title,i=e.toggleCollapse,l=e.onMouseOver,s=e.onMouseOut,u=e.onClose,b=e.style;return Object(a.jsxs)("div",{className:"rolext-panel-header",onMouseOver:l,onMouseOut:s,style:b,children:[o,Object(a.jsx)("div",{style:{flex:1},children:" "})," ",r," ",n&&Object(a.jsx)(he.a,{style:{height:"100%"},className:"rolext-panel-header-collapse-tool rolext-panel-header-tool",onClick:i})," ",u&&Object(a.jsx)(ge.a,{style:{height:"100%"},className:"rolext-panel-header-collapse-tool rolext-panel-header-tool",onClick:u})," ",c]})}),ye=(n(347),function(e){var t=e.expanded,n=void 0===t||t,c=e.className,o=void 0===c?"rolext-panel-expander-wrap":c,i=e.style,u=void 0===i?{}:i,b=Object(s.a)(e,["expanded","className","style"]),j=Object(r.useRef)(null),d=Object(r.useState)(0),O=Object(y.a)(d,2),f=O[0],m=O[1];return Object(r.useEffect)((function(){n?j.current.scrollHeight+5>f&&m(j.current.scrollHeight+5):m(0)}),[n,f]),Object(a.jsx)("div",{ref:j,className:o,style:Object(l.a)(Object(l.a)({},u),{},{height:f}),children:b.children})}),xe=(n(348),function(e){var t=e.expanded,n=void 0===t||t,c=e.collapsible,o=void 0===c||c,i=e.expandDir,l=e.preTools,u=e.postTools,b=e.style,j=void 0===b?null:b,d=e.title,O=e.onTitleMouseOver,f=e.onTitleMouseOut,m=e.titleStyle,p=e.onClose,h=void 0===p?null:p,g=Object(s.a)(e,["expanded","collapsible","expandDir","preTools","postTools","style","title","onTitleMouseOver","onTitleMouseOut","titleStyle","onClose"]),v=Object(r.useState)(n),x=Object(y.a)(v,2),w=x[0],S=x[1],C=Object(r.useCallback)((function(){S((function(e){return!e}))}),[]),k=d.length||o,L="rolext-panel".concat(w?" rolext-panel-expanded":"");return Object(a.jsxs)("div",{className:L,style:j,children:[k&&Object(a.jsx)(ve,{title:d,collapsible:o,toggleCollapse:C,preTools:l,postTools:u,onClose:h,onMouseOver:O,onMouseOut:f,style:m}),Object(a.jsx)(ye,{expanded:w,expandDir:i,children:Object(a.jsx)("div",{className:"rolext-panel-body-el",children:g.children})})]})}),we=n(453),Se=n(440),Ce=(n(349),function(e){var t=e.expanded,n=void 0===t||t,c=(e.collapsible,e.expandDir),o=e.preTools,i=void 0===o?void 0:o,l=e.postTools,u=void 0===l?void 0:l,b=e.style,j=void 0===b?{}:b,d=e.title,O=void 0===d?"My Window":d,f=e.onOk,m=void 0===f?void 0:f,p=e.onCancel,h=void 0===p?void 0:p,g=e.onClose,v=void 0===g?void 0:g,x=e.visible,w=void 0!==x&&x,S=Object(s.a)(e,["expanded","collapsible","expandDir","preTools","postTools","style","title","onOk","onCancel","onClose","visible"]),C=Object(r.useState)(null),k=Object(y.a)(C,2),L=k[0],E=k[1],F=Object(r.useState)(!0),T=Object(y.a)(F,2),R=T[0],N=T[1],I=Object(r.useRef)(null),P=Object(r.useCallback)((function(e,t){var n,a,r,c=null===(n=window)||void 0===n||null===(a=n.document)||void 0===a?void 0:a.documentElement,o=c.clientWidth,i=c.clientHeight,l=null===I||void 0===I||null===(r=I.current)||void 0===r?void 0:r.getBoundingClientRect();E({left:-(null===l||void 0===l?void 0:l.left)+(null===t||void 0===t?void 0:t.x),right:o-((null===l||void 0===l?void 0:l.right)-(null===t||void 0===t?void 0:t.x)),top:-(null===l||void 0===l?void 0:l.top)+(null===t||void 0===t?void 0:t.y),bottom:i-((null===l||void 0===l?void 0:l.bottom)-(null===t||void 0===t?void 0:t.y))})}),[]),A=Object(r.useCallback)((function(){N(!1)}),[]),_=Object(r.useCallback)((function(){N(!0)}),[]);return w&&Object(a.jsx)("div",{className:"rolext-wnd",children:Object(a.jsx)(pe.a,{nodeRef:I,disabled:R,bounds:L,onStart:P,children:Object(a.jsx)("div",{ref:I,children:Object(a.jsx)(we.b,{children:Object(a.jsxs)(xe,{title:O,expanded:n,collapsible:!0,style:j,preTools:i,postTools:u,expandDir:c,onTitleMouseOver:A,onTitleMouseOut:_,titleStyle:{width:"100%",cursor:"move"},onClose:v,children:[S.children,Object(a.jsx)(Se.a,{style:{margin:"5px"}}),(m||h)&&Object(a.jsxs)("div",{className:"rolext-wnd-btn-container",children:[m&&Object(a.jsx)(fe.a,{type:"primary",onClick:m,children:"OK"}),h&&Object(a.jsx)(fe.a,{type:"primary",onClick:h,children:"Cancel"})]})]})})})})})}),ke=n(132),Le=n(443),Ee=n(442),Fe=n(93),Te=n(314),Re=n(445),Ne=n(444),Ie=n(206),Pe=function(){return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Ee.a.Item,{name:"name",label:"Name",rules:[{required:!0}],children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:"maxResolution",label:"Max Resolution",children:Object(a.jsx)(Re.a,{})}),Object(a.jsx)(Ee.a.Item,{name:"minResolution",label:"Min Resolution",children:Object(a.jsx)(Re.a,{})}),Object(a.jsx)(Ee.a.Item,{name:"maxZoom",label:"Max Zoom",children:Object(a.jsx)(Re.a,{})}),Object(a.jsx)(Ee.a.Item,{name:"minZoom",label:"Min Zoom",children:Object(a.jsx)(Re.a,{})}),Object(a.jsx)(Ee.a.Item,{name:"opacity",label:"Opacity",children:Object(a.jsx)(Ne.a,{max:1,step:.1})}),Object(a.jsx)(Ee.a.Item,{name:"visible",valuePropName:"checked",label:"Visible",children:Object(a.jsx)(Ie.a,{})}),Object(a.jsx)(Ee.a.Item,{name:"zIndex",label:"Z-Index",children:Object(a.jsx)(Re.a,{})})]})};Pe.getOpts=function(e){if(e instanceof Fe.a)return{name:e?e.get("name"):void 0,maxResolution:e?e.getMaxResolution():void 0,minResolution:e?e.getMinResolution():void 0,maxZoom:e?e.getMaxZoom():void 0,minZoom:e?e.getMinZoom():void 0,opacity:e?e.getOpacity():1,visible:!e||e.getVisible(),zIndex:e?e.getZIndex():0};e.source;return Object(s.a)(e,["source"])};var Ae=Pe,_e={labelAlign:"left",labelCol:{span:6},wrapperCol:{span:16}},Ge={wrapperCol:{offset:10,span:3}},Me=function(e){var t=e.layerOpts,n=e.onFinish,r=(e.onFinishFailed,e.tabs),c=void 0===r?[{title:"General",key:"general",isDefault:!0,el:Ae}]:r,o=(Object(s.a)(e,["layerOpts","onFinish","onFinishFailed","tabs"]),Ee.a.useForm()),i=Object(y.a)(o,1)[0],u=c[0].key;return c.forEach((function(e){!0===e.isDefault&&(u=e.key)})),Object(a.jsxs)(Ee.a,Object(l.a)(Object(l.a)({},_e),{},{form:i,name:"new-layer-form",onFinish:n,initialValues:t,children:[Object(a.jsx)(Le.a,{defaultActiveKey:u,children:c.map((function(e){var t=e.el;return Object(a.jsx)(Le.a.TabPane,{tab:e.title,children:Object(a.jsx)(t,{mode:"new"})},e.key)}))}),Object(a.jsx)(Ee.a.Item,Object(l.a)(Object(l.a)({},Ge),{},{children:Object(a.jsxs)(we.b,{children:[Object(a.jsx)(fe.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(a.jsx)(fe.a,{htmlType:"button",onClick:function(){i.resetFields()},children:"Reset"}),Object(a.jsx)(fe.a,{type:"link",htmlType:"button",onClick:function(){i.setFieldsValue(t)},children:"Fill form"})]})}))]}))},Ve=function(e){return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Ee.a.Item,{name:["source","url"],label:"URL",rules:[{required:!0}],children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","FEATURE_COUNT"],label:"Feature Count",rules:[{required:!0}],children:Object(a.jsx)(Re.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","FORMAT"],label:"Format",rules:[{required:!0}],children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","LAYERS"],label:"Layers",rules:[{required:!0}],children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","STYLES"],label:"Styles",children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","VERSION"],label:"Version",rules:[{required:!0}],children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","CQL_FILTER"],label:"CQL Filter",children:Object(a.jsx)(Te.a.TextArea,{allowClear:!0})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","INFO_FORMAT"],label:"FeatureInfo Format",children:Object(a.jsx)(Te.a,{})})]})};Ve.getOpts=function(e){if(e instanceof Fe.a)return{source:{url:e.getSource().getUrl(),params:{FEATURE_COUNT:e.getSource().getParams().FEATURE_COUNT,FORMAT:e.getSource().getParams().FORMAT,LAYERS:e.getSource().getParams().LAYERS,STYLES:e.getSource().getParams().STYLES,VERSION:e.getSource().getParams().VERSION,CQL_FILTER:e.getSource().getParams().CQL_FILTER,INFO_FORMAT:e.getSource().getParams().INFO_FORMAT}}}};var ze=Ve,qe={opacity:1,maxResolution:1/0,maxZoom:1/0,minResolution:0,minZoom:-1/0,visible:!0,zIndex:0,name:"unnamed layer",source:{ratio:1,params:{FORMAT:"image/png",STYLES:"",VERSION:"1.1.1",FEATURE_COUNT:50}}},De=function(e){var t=e.map,n=e.parentLayerGroup,c=void 0===n?void 0:n,o=e.layerOpts,i=void 0===o?qe:o,u=e.onFinish,b=void 0===u?void 0:u,j=Object(r.useCallback)((function(e){var n=e.source,a=Object(s.a)(e,["source"]),r=new de.a(Object(l.a)(Object(l.a)({},a),{},{source:new ke.a(n)}));c?c.getLayers().push(r):t.addLayer(r),b&&b()}),[t,c,b]);return Object(a.jsx)(Me,{layerOpts:i,onFinish:j,tabs:[{title:"General",key:"general",isDefault:!0,el:Ae},{title:"Source",key:"source",el:ze}]})},Be=function(e){var t=e.map,n=e.parentLayerGroup,o=void 0===n?void 0:n,i=e.layerOpts,u=void 0===i?void 0:i,b=e.wndStyle,j=e.children,d=Object(s.a)(e,["map","parentLayerGroup","layerOpts","wndStyle","children"]),O=Object(r.useState)(!1),f=Object(y.a)(O,2),m=f[0],p=f[1],h=Object(r.useCallback)((function(e){p(!1)}),[]);return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({onClick:function(){p(!0)}},d),{},{children:j})),m&&Object(a.jsx)(Ce,{title:j,collapsible:!0,onClose:function(){p(!1)},visible:m,style:b,children:Object(a.jsx)(De,{map:t,parentLayerGroup:o,layerOpts:u,onFinish:h})})]})},Ue=n(85),Ze=function(e){var t=e.mode;return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Ee.a.Item,{name:["source","url"],label:"URL",rules:[{required:!0}],children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","attributions"],label:"Attributions",rules:[{required:!1}],children:Object(a.jsx)(Te.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","cacheSize"],label:"Cache Size",rules:[{required:!1}],children:Object(a.jsx)(Re.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","crossOrigin"],label:"Cross Origin",rules:[{required:!1}],children:Object(a.jsx)(Te.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","imageSmoothing"],label:"Image Smooth.: ",valuePropName:"checked",children:Object(a.jsx)(Ie.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","FEATURE_COUNT"],label:"Feature Count",rules:[{required:!0}],children:Object(a.jsx)(Re.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","FORMAT"],label:"Format",rules:[{required:!0}],children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","LAYERS"],label:"Layers",rules:[{required:!0}],children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","STYLES"],label:"Styles",children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","VERSION"],label:"Version",rules:[{required:!0}],children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","params","CQL_FILTER"],label:"CQL Filter",children:Object(a.jsx)(Te.a.TextArea,{allowClear:!0})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","gutter"],label:"Gutter",children:Object(a.jsx)(Re.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","hidpi"],label:"hidpi",valuePropName:"checked",children:Object(a.jsx)(Ie.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","maxZoom"],label:"Max Zoom",children:Object(a.jsx)(Re.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","reprojectionErrorThreshold"],label:"Reproj. Error Threshold",children:Object(a.jsx)(Re.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","serverType"],label:"Server Type",children:Object(a.jsx)(Te.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","wrapX"],label:"Wrap X",valuePropName:"checked",children:Object(a.jsx)(Ie.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","transition"],label:"Transition",children:Object(a.jsx)(Re.a,{})})]})};Ze.getOpts=function(e){if(e instanceof Fe.a)return{source:{url:e.getSource().getUrls(),attributions:e.getSource().getAttributions()&&e.getSource().getAttributions()(Ue.a.READY),params:{FEATURE_COUNT:e.getSource().getParams().FEATURE_COUNT,FORMAT:e.getSource().getParams().FORMAT,LAYERS:e.getSource().getParams().LAYERS,STYLES:e.getSource().getParams().STYLES,VERSION:e.getSource().getParams().VERSION,CQL_FILTER:e.getSource().getParams().CQL_FILTER}}}};var Ye=Ze;function He(e){if(e)for(var t in e)e[t]&&("string"===typeof e[t]||e[t]instanceof String)&&(e[t]=e[t].trim(),""===e[t]&&(e[t]=void 0))}var We={opacity:1,maxResolution:1/0,maxZoom:1/0,minResolution:0,minZoom:-1/0,visible:!0,zIndex:0,name:"unnamed layer",source:{imageSmoothing:!0,opaque:!0,wrapX:!0,hidpi:!0,gutter:0,params:{FORMAT:"image/png",STYLES:"",VERSION:"1.1.1",FEATURE_COUNT:50}}},Xe=function(e){var t=e.map,n=e.parentLayerGroup,c=void 0===n?void 0:n,o=e.layerOpts,i=void 0===o?We:o,u=e.onFinish,b=void 0===u?void 0:u,j=Object(r.useCallback)((function(e){He(e),He(e.source),He(e.source.params);var n=e.source,a=Object(s.a)(e,["source"]),r=new U.a(Object(l.a)(Object(l.a)({},a),{},{source:new H.a(n)}));c?c.getLayers().push(r):t.addLayer(r),b&&b()}),[t,c,b]);return Object(a.jsx)(Me,{layerOpts:i,onFinish:j,tabs:[{title:"General",key:"general",isDefault:!0,el:Ae},{title:"Source",key:"source",el:Ye}]})},Qe=function(e){var t=e.map,n=e.parentLayerGroup,o=void 0===n?void 0:n,i=e.layerOpts,u=void 0===i?void 0:i,b=e.wndStyle,j=e.children,d=Object(s.a)(e,["map","parentLayerGroup","layerOpts","wndStyle","children"]),O=Object(r.useState)(!1),f=Object(y.a)(O,2),m=f[0],p=f[1],h=Object(r.useCallback)((function(e){p(!1)}),[]);return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({onClick:function(){p(!0)}},d),{},{children:j})),m&&Object(a.jsx)(Ce,{title:j,collapsible:!0,onClose:function(){p(!1)},visible:m,style:b,children:Object(a.jsx)(Xe,{map:t,parentLayerGroup:o,layerOpts:u,onFinish:h})})]})},Ke={opacity:1,maxResolution:1/0,maxZoom:1/0,minResolution:0,minZoom:-1/0,visible:!0,zIndex:0,name:"unnamed group layer"},Je=function(e){var t=e.map,n=e.parentLayerGroup,c=void 0===n?void 0:n,o=e.layerOpts,i=void 0===o?Ke:o,l=e.onFinish,s=void 0===l?void 0:l,u=Object(r.useCallback)((function(e){var n=new Y.b(e);c?c.getLayers().push(n):t.addLayer(n),s&&s()}),[t,c,s]);return Object(a.jsx)(Me,{layerOpts:i,onFinish:u})},$e=function(e){var t=e.map,n=e.parentLayerGroup,o=void 0===n?t.getLayerGroup():n,i=e.layerOpts,u=void 0===i?void 0:i,b=e.wndStyle,j=e.children,d=Object(s.a)(e,["map","parentLayerGroup","layerOpts","wndStyle","children"]),O=Object(r.useState)(!1),f=Object(y.a)(O,2),m=f[0],p=f[1],h=Object(r.useCallback)((function(e){p(!1)}),[]);return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({onClick:function(){p(!0)}},d),{},{children:j})),m&&Object(a.jsx)(Ce,{title:j,collapsible:!0,onClose:function(){p(!1)},visible:m,style:b,children:Object(a.jsx)(Je,{map:t,parentLayerGroup:o,layerOpts:u,onFinish:h})})]})},et=function(e){var t=e.mode;return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Ee.a.Item,{name:["source","url"],label:"URL",rules:[{required:!1}],children:Object(a.jsx)(Te.a,{})}),Object(a.jsx)(Ee.a.Item,{name:["source","attributions"],label:"Attributions",rules:[{required:!1}],children:Object(a.jsx)(Te.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","cacheSize"],label:"Cache Size",rules:[{required:!1}],children:Object(a.jsx)(Re.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","crossOrigin"],label:"Cross Origin",rules:[{required:!1}],children:Object(a.jsx)(Te.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","imageSmoothing"],label:"Image Smooth.: ",valuePropName:"checked",children:Object(a.jsx)(Ie.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","maxZoom"],label:"Max Zoom",children:Object(a.jsx)(Re.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","opaque"],label:"Opaque",valuePropName:"checked",children:Object(a.jsx)(Ie.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","reprojectionErrorThreshold"],label:"Reproj. Error Threshold",children:Object(a.jsx)(Re.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","transition"],label:"Max Zoom",children:Object(a.jsx)(Re.a,{})}),"new"===t&&Object(a.jsx)(Ee.a.Item,{name:["source","wrapX"],label:"Wrap X",valuePropName:"checked",children:Object(a.jsx)(Ie.a,{})})]})};et.getOpts=function(e){if(e instanceof Fe.a)return{source:{url:e.getSource().getUrls(),attributions:e.getSource().getAttributions()(Ue.a.READY)}}};var tt=et,nt={opacity:1,maxResolution:1/0,maxZoom:1/0,minResolution:0,minZoom:-1/0,visible:!0,zIndex:0,name:"OSM",source:{imageSmoothing:!0,opaque:!0,wrapX:!0}},at=function(e){var t=e.map,n=e.parentLayerGroup,c=void 0===n?void 0:n,o=e.layerOpts,i=void 0===o?nt:o,u=e.onFinish,b=void 0===u?void 0:u,j=Object(r.useCallback)((function(e){var n=e.source,a=Object(s.a)(e,["source"]),r=Object(l.a)(Object(l.a)({},a),{},{source:new Z.a(n)}),o=new U.a(r);c?c.getLayers().push(o):t.addLayer(o),b&&b()}),[t,c,b]);return Object(a.jsx)(Me,{layerOpts:i,onFinish:j,tabs:[{title:"General",key:"general",isDefault:!0,el:Ae},{title:"Source",key:"source",el:tt}]})},rt=function(e){var t=e.map,n=e.parentLayerGroup,o=void 0===n?void 0:n,i=e.layerOpts,u=void 0===i?void 0:i,b=e.wndStyle,j=e.children,d=Object(s.a)(e,["map","parentLayerGroup","layerOpts","wndStyle","children"]),O=Object(r.useState)(!1),f=Object(y.a)(O,2),m=f[0],p=f[1],h=Object(r.useCallback)((function(e){p(!1)}),[]);return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({onClick:function(){p(!0)}},d),{},{children:j})),m&&Object(a.jsx)(Ce,{title:j,collapsible:!0,onClose:function(){p(!1)},visible:m,style:b,children:Object(a.jsx)(at,{map:t,parentLayerGroup:o,layerOpts:u,onFinish:h})})]})},ct={labelAlign:"left",labelCol:{span:6},wrapperCol:{span:16}},ot={wrapperCol:{offset:10,span:3}},it=function(e){var t=e.layer,n=e.onFinish,r=(e.onFinishFailed,e.tabs),c=void 0===r?[{title:"General",key:"general",isDefault:!0,el:Ae}]:r,o=(Object(s.a)(e,["layer","onFinish","onFinishFailed","tabs"]),Ee.a.useForm()),i=Object(y.a)(o,1)[0],u=c[0].key,b={};c.forEach((function(e){b=Object(l.a)(Object(l.a)({},b),e.el.getOpts(t)),!0===e.isDefault&&(u=e.key)}));return Object(a.jsxs)(Ee.a,Object(l.a)(Object(l.a)({},ct),{},{form:i,name:"edit-layer-form",onFinish:n,initialValues:b,children:[Object(a.jsx)(Le.a,{defaultActiveKey:u,children:c.map((function(e){var t=e.el;return Object(a.jsx)(Le.a.TabPane,{tab:e.title,children:Object(a.jsx)(t,{mode:"edit"})},e.key)}))}),Object(a.jsx)(Ee.a.Item,Object(l.a)(Object(l.a)({},ot),{},{children:Object(a.jsxs)(we.b,{children:[Object(a.jsx)(fe.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(a.jsx)(fe.a,{htmlType:"button",onClick:function(){i.resetFields()},children:"Reset"}),Object(a.jsx)(fe.a,{type:"link",htmlType:"button",onClick:function(){i.setFieldsValue(b)},children:"Fill form"})]})}))]}))},lt=function(e){var t=e.layer,n=e.onFinish,c=Object(r.useCallback)((function(e){e.source;var a=Object(s.a)(e,["source"]);He(a),t.setProperties(a),n&&n(e)}),[t,n]);return Object(a.jsx)(it,{layer:t,onFinish:c})},st=function(e){var t=e.layer,n=e.onFinish,c=Object(r.useCallback)((function(e){He(e),e.source&&(He(e.source),e.source.params&&He(e.source.params));var a=e.source,r=Object(s.a)(e,["source"]);if(t.setProperties(r),a&&t.getSource()instanceof ke.a){for(var c in t.getSource().setUrl(a.url),a.params)""===a.params[c]&&(a.params[c]=void 0);t.getSource().updateParams(a.params)}n&&n(e)}),[t,n]);return Object(a.jsx)(it,{layer:t,onFinish:c,tabs:[{title:"General",key:"general",isDefault:!0,el:Ae},{title:"Source",key:"source",el:ze}]})},ut=function(e){var t=e.layer,n=e.onFinish,c=Object(r.useCallback)((function(e){He(e),e.source&&(He(e.source),e.source.params&&He(e.source.params));var a=e.source,r=Object(s.a)(e,["source"]);t.setProperties(r),a&&t.getSource()instanceof H.a&&(a.url&&Array.isArray(a.url)?t.getSource().setUrls(a.url):a.url&&("string"===typeof a.url||a.url instanceof String)&&t.getSource().setUrls(a.url.split(",")),a.attributions&&Array.isArray(a.attributions)?t.getSource().setAttributions(a.attributions):a.attributions&&("string"===typeof a.attributions||a.attributions instanceof String)&&t.getSource().setAttributions(a.attributions.split(",")),a.params&&t.getSource().updateParams(a.params)),n&&n(e)}),[t,n]);return Object(a.jsx)(it,{layer:t,onFinish:c,tabs:[{title:"General",key:"general",isDefault:!0,el:Ae},{title:"Source",key:"source",el:Ye}]})},bt=function(e){var t=e.layer,n=e.onFinish,c=Object(r.useCallback)((function(e){var a=e.source,r=Object(s.a)(e,["source"]);t.setProperties(r),a&&t.getSource()instanceof Z.a&&(a.url&&Array.isArray(a.url)?t.getSource().setUrls(a.url):a.url&&("string"===typeof a.url||a.url instanceof String)&&t.getSource().setUrls(a.url.split(",")),a.attributions&&Array.isArray(a.attributions)?t.getSource().setAttributions(a.attributions):a.attributions&&("string"===typeof a.attributions||a.attributions instanceof String)&&t.getSource().setAttributions(a.attributions.split(","))),n&&n(e)}),[t,n]);return Object(a.jsx)(it,{layer:t,onFinish:c,tabs:[{title:"General",key:"general",isDefault:!0,el:Ae},{title:"Source",key:"source",el:tt}]})},jt=function(e){var t=e.title,n=void 0===t?"Layer":t,r=e.visible,c=void 0!==r&&r,o=e.onOk,i=e.layer,u=Object(s.a)(e,["title","visible","onOk","layer"]);return Object(a.jsx)(Ce,Object(l.a)(Object(l.a)({title:n,collapsible:!0,visible:c},u),{},{children:i instanceof Y.b?Object(a.jsx)(lt,{layer:i,onFinish:o}):i.getSource()instanceof ke.a?Object(a.jsx)(st,{layer:i,onFinish:o}):i.getSource()instanceof H.a?Object(a.jsx)(ut,{layer:i,onFinish:o}):i.getSource()instanceof Z.a?Object(a.jsx)(bt,{layer:i,onFinish:o}):Object(a.jsx)(lt,{layer:i,onFinish:o})}))},dt=function(e){var t=e.layer,n=e.wndStyle,o=e.children,i=Object(s.a)(e,["layer","wndStyle","children"]),u=Object(r.useState)(!1),b=Object(y.a)(u,2),j=b[0],d=b[1],O=function(){d(!1)};return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({onClick:function(){d(!0)}},i),{},{children:o})),j&&Object(a.jsx)(jt,{onOk:O,onClose:O,layer:t,style:n,visible:j})]})},Ot=function(e){var t=e.map,n=e.layer,c=e.children,o=Object(s.a)(e,["map","layer","children"]),i=Object(r.useCallback)((function(e){t&&n&&(n.getSource&&n.getSource().clear&&n.getSource().clear(!0),t.removeLayer(n))}),[n,t]);return Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({},o),{},{onClick:i,children:c}))},ft=function(e){var t=e.vectorLayer,n=e.children,c=Object(s.a)(e,["vectorLayer","children"]),o=Object(r.useCallback)((function(e){t&&t.getSource().clear()}),[t]);return Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({},c),{},{onClick:o,children:n}))},mt=n(315),pt=n(199),ht=n(180),gt=n(103),vt=n(101),yt=n(133),xt=(n(277),new gt.c({image:new yt.a({radius:1,fill:new vt.a({color:"#ffcc33"})})})),wt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Select Point or &lt;esc&gt; to Cancel",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xt,a=Object(r.useState)(null),c=Object(y.a)(a,2),o=c[0],i=c[1],l=Object(r.useCallback)((function(e){e.feature&&e.feature.getGeometry()!==o&&i(e.feature.getGeometry())}),[o]),s=Object(r.useCallback)((function(){m(!1)}),[]),u=Object(r.useCallback)((function(){}),[]),b=Object(r.useCallback)((function(e,t){var a=new ht.a({source:t,type:"Point",style:n});return a.on("drawend",s),a.on("drawstart",l),a.on("drawabort",u),a.setActive(!1),a}),[s,l,u,n]),j=Object(r.useState)(b(e,new T.a))[0],d=Object(r.useState)(!1),O=Object(y.a)(d,2),f=O[0],m=O[1],p=Object(r.useCallback)((function(){var e=document.createElement("div");return e.className="tooltip-hidden",new pt.a({element:e,offset:[15,0],positioning:"center-left"})}),[]),h=Object(r.useState)(p())[0],g=Object(r.useCallback)((function(){h&&h.getElement()&&(h.getElement().innerHTML="",h.getElement().className="tooltip-hidden")}),[h]),v=Object(r.useCallback)((function(e){e.dragging||(h&&h.getElement()&&(h.getElement().innerHTML=t,h.getElement().className="tooltip"),h&&h.setPosition(e.coordinate))}),[h,t]),x=Object(r.useCallback)((function(){m(!0)}),[]),w=Object(r.useCallback)((function(){m(!1)}),[]),S=Object(r.useCallback)((function(e){27===e.keyCode&&w()}),[w]),C=Object(r.useCallback)((function(){i(null)}),[]),k=Object(r.useCallback)((function(){document.removeEventListener("keydown",S),j.setActive(!1),e.removeOverlay(h),e.getViewport().removeEventListener("mouseout",g),e.un("pointermove",v),g()}),[j,e,h,v,g,S]);return Object(r.useEffect)((function(){return f?(document.addEventListener("keydown",S),j.setActive(!0),e.addOverlay(h),e.getViewport().addEventListener("mouseout",g),e.on("pointermove",v)):k(),function(){k()}}),[f,j,e,h,k,v,g,S]),Object(r.useEffect)((function(){return e.addInteraction(j),function(){e.removeInteraction(j)}}),[b,j,e]),{start:x,stop:w,clear:C,geometry:o,isRunning:f}},St=n(207),Ct=n(265),kt=function(e){return(new Ct.a).readFeatures(e)},Lt=function(e){var t=function(e){var t=e;"string"===typeof e&&(t=(new DOMParser).parseFromString(e,"application/xml"));var n=(new DOMParser).parseFromString(['<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform">','  <xsl:strip-space elements="*"/>','  <xsl:template match="para[content-style][not(text())]">','    <xsl:value-of select="normalize-space(.)"/>',"  </xsl:template>",'  <xsl:template match="node()|@*">','    <xsl:copy><xsl:apply-templates select="node()|@*"/></xsl:copy>',"  </xsl:template>",'  <xsl:output indent="yes"/>',"</xsl:stylesheet>"].join("\n"),"application/xml"),a=new XSLTProcessor;a.importStylesheet(n);var r=a.transformToDocument(t);return(new XMLSerializer).serializeToString(r)}(e),n={},a={};return a["text/xml"]=t,n.getProperties=function(){return a},n.getId=function(){return"text/xml.".concat(Date.now())},[n]},Et=function(e,t){switch(t){case"application/json":return kt(e);case"application/vnd.esri.wms_featureinfo_xml":return function(e){var t=null;t="string"===typeof e?(new DOMParser).parseFromString(e,"application/xml"):e;for(var n=[],a=t.getElementsByTagNameNS("http://www.esri.com/wms","FeatureInfoCollection"),r=function(e){for(var t=a[e].getAttribute("layername"),r=a[e].getElementsByTagNameNS("http://www.esri.com/wms","FeatureInfo"),c=function(e){for(var a={},c={},o=r[e].getElementsByTagNameNS("http://www.esri.com/wms","Field"),i=0;i<o.length;++i){var l=o[i].getElementsByTagNameNS("http://www.esri.com/wms","FieldName")[0].innerHTML,s=o[i].getElementsByTagNameNS("http://www.esri.com/wms","FieldValue")[0].innerHTML;c[l]=s}a.getProperties=function(){return c},a.getId=function(){return"".concat(t,".").concat(e)},n.push(a)},o=0;o<r.length;++o)c(o);return{v:n}},c=0;c<a.length;++c){var o=r(c);if("object"===typeof o)return o.v}}(e);case"application/vnd.esri.wms_raw_xml":return function(e){var t=null;t="string"===typeof e?(new DOMParser).parseFromString(e,"application/xml"):e;for(var n=[],a=t.getElementsByTagNameNS("http://www.esri.com/wms","FeatureInfoCollection"),r=function(e){for(var t=a[e].getAttribute("layername"),r=a[e].getElementsByTagNameNS("http://www.esri.com/wms","FeatureInfo"),c=function(e){for(var a={},c={},o=r[e].getElementsByTagNameNS("http://www.esri.com/wms","Field"),i=0;i<o.length;++i){var l=o[i].getElementsByTagNameNS("http://www.esri.com/wms","FieldName")[0].childNodes[0].nodeValue,s=o[i].getElementsByTagNameNS("http://www.esri.com/wms","FieldValue")[0].childNodes[0].nodeValue;c[l]=s}a.getProperties=function(){return c},a.getId=function(){return"".concat(t,".").concat(e)},n.push(a)},o=0;o<r.length;++o)c(o);return{v:n}},c=0;c<a.length;++c){var o=r(c);if("object"===typeof o)return o.v}}(e);case"text/xml":return Lt(e);default:return kt(e)}},Ft=function(){var e=Object(r.useState)(null),t=Object(y.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),o=Object(y.a)(c,2),i=o[0],s=o[1],u=Object(r.useCallback)((function(){a(null),s(null)}),[]);return[Object(r.useCallback)((function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{method:"GET"},c=n.getCoordinates(),o=ne(t);if(0!==o.length){var i=e.getView(),u=i.getResolution(),b=i.getProjection(),j=[];o.forEach((function(e,t){j.push(!0)})),r=Object(l.a)(Object(l.a)({},r),{},{method:"GET"}),o.forEach((function(e,t){var n=e.getSource();if(n.getFeatureInfoUrl){var o=e.getSource().getParams().INFO_FORMAT;console.log("info_format:",o),o||(o="application/json");var i=n.getFeatureInfoUrl(c,u,b,{INFO_FORMAT:o});console.log("WMS GetFeatureInfo Request:",i),fetch(i,r).then((function(e){if(!e.ok)throw new Error(e);return"application/json"===o?e.json():e.text()})).then((function(e){console.log("WFS GetFeature Response:",e);var t=Et(e,o);s((function(e){return e&&t?[].concat(Object(St.a)(e),Object(St.a)(t)):t}))})).catch((function(e){a((function(t){return t?[].concat(Object(St.a)(t),[e]):[e]})),mt.b.info(e.message)}))}}))}else mt.b.info("Please, activate the layers to retrieve the features!!!")}),[]),u,n,i]},Tt=n(441),Rt=n(150),Nt=function(e){var t=e.title,n=e.style,c=void 0===n?{width:500}:n,o=e.features,i=e.onClose,u=e.onCancel,b=e.visible,j=Object(s.a)(e,["title","style","features","onClose","onCancel","visible"]),d=Object(r.useCallback)((function(e){if(!e||0===e.length)return[[]];var t=[];return e.forEach((function(e){var n=e.getProperties(),a=0,r=[];for(var c in n){var o={};n[c]instanceof Rt.a||(o.key=a.toString(),o.name=c,o.value=n[c],a+=1,r.push(o))}t.push(r)})),t}),[]),O=Object(r.useCallback)((function(e){var t=[];return e&&0!==e.length?(e.forEach((function(e){t.push(e.getId())})),t):t}),[]),f=Object(r.useState)(d(o)),m=Object(y.a)(f,2),p=m[0],h=m[1],g=Object(r.useState)(O(o)),v=Object(y.a)(g,2),x=v[0],w=v[1],S=[{title:"Name",dataIndex:"name",key:"name"},{title:"Value",dataIndex:"value",key:"value"}],C={scrollToFirstRowOnChange:!0,x:400,y:400};return Object(r.useEffect)((function(){o&&o.length>0&&(h(d(o)),w(O(o)))}),[d,o,O]),Object(a.jsx)(Ce,Object(l.a)(Object(l.a)({title:t,collapsible:!0,visible:b,onCancel:u,onClose:i,style:c},j),{},{children:Object(a.jsx)(Le.a,{defaultActiveKey:["0"],tabPosition:"top",children:p.map((function(e,t){return Object(a.jsx)(Le.a.TabPane,{tab:x[t],children:Object(a.jsx)(Tt.a,{dataSource:e,columns:S,size:"middle",tableLayout:"auto",pagination:!1,scroll:C,bordered:!0,sticky:!0})},t.toString())}))})}))},It=function(e){var t=e.map,n=e.layers,c=e.fetchOpts,o=e.msg,i=e.wndStyle,u=e.children,b=Object(s.a)(e,["map","layers","fetchOpts","msg","wndStyle","children"]),j=wt(t,o),d=Ft(),O=Object(y.a)(d,4),f=O[0],m=O[1],p=O[2],h=O[3];p&&console.log("WMS GetFeatureInfo Errors: ",p);var g=Object(r.useCallback)((function(){j.start()}),[j]);return Object(r.useEffect)((function(){if(j.geometry&&!j.isRunning){var e=j.geometry;j.clear(),f(t,n,e,c)}}),[j,c,n,t,f]),Object(r.useEffect)((function(){h&&0===h.length&&mt.b.info("No feature(s) selected!")}),[h]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({},b),{},{onClick:g,disabled:j.isRunning,children:u})),h&&h.length>0&&Object(a.jsx)(Nt,{title:u||"Info",features:h,visible:h&&h.length>0,onClose:function(){m()},style:i})]})},Pt=function(e){var t=e.map,n=e.node,r=e.xPos,c=e.yPos,o=e.showMenu;if(!n)return null;var i,l=Object(a.jsxs)(ie.a,{mode:"vertical",children:[function(e){if(e)return Object(a.jsx)(ie.a.Item,{icon:Object(a.jsx)(se.a,{}),children:Object(a.jsx)(dt,{size:"small",type:"text",wndStyle:{visibility:"visible",width:700,maxHeight:500},layer:e,children:"Edit Layer"})})}(n.ol_layer),(i=n.ol_layer,i&&i!==t.getLayerGroup()?Object(a.jsx)(ie.a.Item,{icon:Object(a.jsx)(ue.a,{}),children:Object(a.jsx)(Ot,{size:"small",type:"text",map:t,layer:n.ol_layer,children:"Remove Layer"})}):null),function(e){return e instanceof F.a?Object(a.jsx)(ie.a.Item,{icon:Object(a.jsx)(be.a,{}),children:Object(a.jsx)(ft,{size:"small",type:"text",map:t,vectorLayer:n.ol_layer,children:"Clear Layer"})}):null}(n.ol_layer),function(e,t){return t instanceof de.a||t instanceof Y.b?Object(a.jsx)(ie.a.Item,{icon:Object(a.jsx)(je.a,{}),selectable:!1,children:Object(a.jsx)(It,{size:"small",type:"text",map:e,layers:[t],wndStyle:{visibility:"visible",width:600},children:"Feature Info"})}):null}(t,n.ol_layer),Object(a.jsx)(ie.a.Divider,{}),Object(a.jsx)(ie.a.Divider,{}),function(e){return e&&e instanceof Y.b?Object(a.jsx)(ie.a.Item,{icon:Object(a.jsx)(le.a,{}),children:Object(a.jsx)($e,{size:"small",type:"text",map:t,parentLayerGroup:e,wndStyle:{visibility:"visible",width:700,maxHeight:500},children:"New Group Layer"})}):null}(n.ol_layer),function(e){return e&&e instanceof Y.b?Object(a.jsx)(ie.a.Item,{icon:Object(a.jsx)(le.a,{}),children:Object(a.jsx)(Be,{size:"small",type:"text",map:t,parentLayerGroup:e,wndStyle:{visibility:"visible",width:700,maxHeight:500},children:"New WMS Layer"})}):null}(n.ol_layer),function(e){return e&&e instanceof Y.b?Object(a.jsx)(ie.a.Item,{icon:Object(a.jsx)(le.a,{}),children:Object(a.jsx)(Qe,{size:"small",type:"text",map:t,parentLayerGroup:e,wndStyle:{visibility:"visible",width:700,maxHeight:500},children:"New Tile WMS Layer"})}):null}(n.ol_layer),function(e){return e&&e instanceof Y.b?Object(a.jsx)(ie.a.Item,{icon:Object(a.jsx)(le.a,{}),children:Object(a.jsx)(rt,{size:"small",type:"text",map:t,parentLayerGroup:e,wndStyle:{visibility:"visible",width:700,maxHeight:500},children:"New OSM Layer"})}):null}(n.ol_layer)]});return Object(a.jsx)(Oe,{overlay:l,node:n,xPos:r,yPos:c,showMenu:o})},At=function(){var e=Object(r.useState)("0px"),t=Object(y.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)("0px"),o=Object(y.a)(c,2),i=o[0],l=o[1],s=Object(r.useState)(!1),u=Object(y.a)(s,2),b=u[0],j=u[1],d=Object(r.useState)(null),O=Object(y.a)(d,2),f=O[0],m=O[1],p=Object(r.useCallback)((function(e){var t=e.node,n=e.event;a("".concat(n.clientX,"px")),l("".concat(n.clientY,"px")),j(!0),m(t)}),[a,l]),h=Object(r.useCallback)((function(){b&&j(!1)}),[b]);return Object(r.useEffect)((function(){return document.addEventListener("click",h),function(){document.removeEventListener("click",h)}}),[h]),{xPos:n,yPos:i,showMenu:b,rightClickedNode:f,onRightClickNode:p}},_t=function(e){var t=e.map,n=e.layerGroup,o=void 0===n?t.getLayerGroup():n,i=e.draggable,l=void 0===i||i,s=e.checkable,u=void 0===s||s,b=e.onExpand,j=void 0!==b&&b,d=e.filterFunc,O=void 0===d?null:d,f=e.titleFunc,m=void 0===f?null:f,p=Object(r.useState)([]),h=Object(y.a)(p,2),g=h[0],v=h[1],x=Object(r.useState)([]),w=Object(y.a)(x,2),S=w[0],C=w[1],k=At(),L=k.xPos,E=k.yPos,F=k.showMenu,T=k.rightClickedNode,R=k.onRightClickNode,N=null;t.getLayerGroup().get("name")?N=t.getLayerGroup().get("name"):(N="Layers",t.getLayerGroup().set("name",N));var I=Object(r.useCallback)((function(){var e=K(o,(function(e){return!(e instanceof Y.b)&&e.getVisible()}));return(e=O?e.filter(O):e).map((function(e){return e.ol_uid.toString()}))}),[O,o]),P=Object(r.useCallback)((function(e){var t=[];if(e instanceof Y.b){var n=e.getLayers().getArray();(t=(n=O?n.filter(O):n).map((function(e){return P(e)}))).reverse()}return Object(a.jsx)(oe.a.TreeNode,{title:m?m(e):e.get("name"),ol_layer:e,children:t.length>0&&t},e.ol_uid.toString())}),[O,m]),A=Object(r.useCallback)((function(e){var t=e.getLayers().getArray(),n=(t=O?t.filter(O):t).map((function(e){return P(e)}));n.reverse(),v(n)}),[O,P]),_=Object(r.useCallback)((function(e){A(o),C(I())}),[o,I,A]),G=Object(r.useCallback)((function(e){e.target.get("name")!==e.oldValue&&_()}),[_]),M=Object(r.useCallback)((function(e){var t=O||function(){return!0};e instanceof Y.b?(t(e)&&e.on("change:name",G),e.getLayers().forEach((function(e){t(e)&&M(e)}))):t(e)&&e.on("change:name",G)}),[O,G]),V=Object(r.useCallback)((function(e){var t=O||function(){return!0};e instanceof Y.b?(t(e)&&e.un("change:name",G),e.getLayers().forEach((function(e){t(e)&&V(e)}))):t(e)&&e.un("change:name",G)}),[O,G]),z=Object(r.useCallback)((function(e){var t=I();C(t),_()}),[I,_]),q=Object(r.useCallback)((function(e){var t=O||function(){return!0};e instanceof Y.b?(t(e)&&e.on("change:visible",z),e.getLayers().forEach((function(e){t(e)&&q(e)}))):t(e)&&e.on("change:visible",z)}),[O,z]),D=Object(r.useCallback)((function(e){var t=O||function(){return!0};e instanceof Y.b?(t(e)&&e.un("change:visible",z),e.getLayers().forEach((function(e){t(e)&&D(e)}))):t(e)&&e.un("change:visible",z)}),[O,z]),B=null,U=null,Z=Object(r.useCallback)((function(e){(O||function(){return!0})(e.element)&&(e.element instanceof Y.b&&B&&B(e.element),q(e.element),M(e.element)),_()}),[B,q,M,O,_]),H=Object(r.useCallback)((function(e){(O||function(){return!0})(e.element)&&(e.element instanceof Y.b&&U&&U(e.element),D(e.element),V(e.element)),_()}),[U,D,O,_,V]),W=Object(r.useCallback)((function(e){}),[]);B=Object(r.useCallback)((function(e){var t=O||function(){return!0},n=e.getLayers();t(e)&&(n.on("add",Z),n.on("remove",H),e.on("change:layers",W)),n.forEach((function(e){e instanceof Y.b&&B(e)}))}),[O,Z,H,W,B]),U=Object(r.useCallback)((function(e){var t=O||function(){return!0},n=e.getLayers();t(e)&&(n.un("add",Z),n.un("remove",H),e.un("change:layers",W)),n.forEach((function(e){e instanceof Y.b&&U(e)}))}),[O,Z,H,W,U]);var X=Object(r.useCallback)((function(e,t){e instanceof Y.b?e.getLayers().forEach((function(e){X(e,t)})):e&&e.setVisible(t)}),[]),Q=Object(r.useCallback)((function(e,t){var n=t.checked,a=t.node.ol_layer;X(a,n)}),[X]),$=Object(r.useCallback)((function(e){var n=e.dragNode.ol_layer,a=J(n,t).groupLayer.getLayers(),r=e.node.ol_layer,c=e.node.pos.split("-"),o=e.dropPosition-Number(c[c.length-1]);a.remove(n);var i=J(r,t),l=i.position,s=i.groupLayer.getLayers();-1===o?l===s.getLength()-1?s.push(n):s.insertAt(l+1,n):0===o?r instanceof Y.b?r.getLayers().push(n):s.insertAt(l+1,n):1===o&&s.insertAt(l,n),_()}),[t,_]),ee=Object(r.useCallback)((function(e,t){_(),j&&ee(e,t)}),[j,_]);return Object(r.useEffect)((function(){return q(o),function(){return D(o)}}),[o,q,D]),Object(r.useEffect)((function(){return M(o),function(){return V(o)}}),[o,M,V]),Object(r.useEffect)((function(){return B(o),function(){return U(o)}}),[o,B,U]),Object(r.useEffect)((function(){_()}),[_]),Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(oe.a,{checkedKeys:S,draggable:l,checkable:u,onCheck:Q,onDrop:$,onExpand:ee,onRightClick:R,children:Object(a.jsx)(oe.a.TreeNode,{title:N,ol_layer:t.getLayerGroup(),children:g},"root")}),Object(a.jsx)(Pt,{map:t,node:T,xPos:L,yPos:E,showMenu:F})]})},Gt=n(220),Mt=function(e){var t=e.title,n=void 0===t?"Coordinate":t,c=e.visible,o=void 0===c||c,i=e.onClose,l=e.map,s=e.coordinate,u=e.coordinateProj,b=void 0===u?l.getView().getProjection():u,j=e.projs,d=void 0===j?[l.getView().getProjection()]:j,O=e.style,f=Object(r.useRef)(null),m=Object(r.useState)(l.getView().getProjection().getCode()),p=Object(y.a)(m,2),h=p[0],g=p[1],v=Object(r.useState)(ae(s,b.getCode(),b.getCode())),x=Object(y.a)(v,2),w=x[0],S=x[1],C=Object(r.useCallback)((function(e){g(e),S(ae(s,b.getCode(),e))}),[s,b]),k=Object(r.useCallback)((function(){var e=f.current;e.select(),e.setSelectionRange(0,99999),document.execCommand("copy")}),[]);return Object(a.jsx)(Ce,{title:n,collapsible:!0,onClose:i,visible:o,style:O,children:Object(a.jsxs)(we.b,{direction:"vertical",children:[Object(a.jsx)(Gt.a,{defaultValue:h,onChange:C,children:d.map((function(e){return Object(a.jsx)(Gt.a.Option,{value:e.getCode(),children:e.getCode()},e.getCode())}))}),Object(a.jsxs)("div",{style:{display:"flex",gap:5},children:[Object(a.jsx)(Te.a,{addonBefore:ce(h),ref:f,style:{width:400},value:w,onChange:function(e){S(e.target.value)}}),Object(a.jsx)(fe.a,{type:"primary",onClick:k,children:"Copy"})]})]})})},Vt=function(e){var t=e.map,n=e.wndStyle,o=e.msg,i=void 0===o?"Pick Coordinate":o,u=e.projs,b=e.children,j=void 0===b?"Get Coordinate":b,d=Object(s.a)(e,["map","wndStyle","msg","projs","children"]),O=wt(t,i),f=Object(r.useState)(null),m=Object(y.a)(f,2),p=m[0],h=m[1],g=Object(r.useState)(!1),v=Object(y.a)(g,2),x=v[0],w=v[1],S=Object(r.useCallback)((function(e){O.start()}),[O]),C=Object(r.useCallback)((function(){w(!1),h(null)}),[]);return Object(r.useEffect)((function(){O.geometry&&!O.isRunning&&(h(O.geometry),w(!0),O.clear())}),[O]),Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({},d),{},{onClick:S,disabled:O.isRunning||x,children:j})),p&&Object(a.jsx)(Mt,{title:j,onClose:C,visible:x,map:t,coordinate:p?p.getCoordinates():null,coordinateProj:t.getView().getProjection(),projs:u,style:n})]})},zt=n(120),qt=n(282),Dt=n(264),Bt=function(e){var t=e.map,n=e.vectorLayer,c=e.children,o=Object(s.a)(e,["map","vectorLayer","children"]),i=Object(r.useCallback)((function(e){n&&t&&te(t,n)}),[n,t]);return Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({},o),{},{onClick:i,children:c}))},Ut=function(e){var t=e.map,n=e.gridApi,c=Object(s.a)(e,["map","gridApi"]),o=Object(r.useCallback)((function(e){if(t&&n){var a=n.getSelectedRows().map((function(e){return e.__feature}));!function(e,t){if(t.length>0){var n=new T.a;n.addFeatures(t);var a=n.getExtent();ee(e,a)}}(t,a)}}),[n,t]);return Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({},c),{},{onClick:o,children:e.children}))},Zt=function(e){var t=e.vectorLayer,n=e.gridApi,c=e.children,o=Object(s.a)(e,["vectorLayer","gridApi","children"]),i=Object(r.useCallback)((function(e){n&&t&&n.getSelectedRows().map((function(e){return e.__feature})).forEach((function(e){t.getSource().removeFeature(e)}))}),[n,t]);return Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({},o),{},{onClick:i,children:c}))},Yt=function(e){var t=e.map,n=e.layer,r=e.gridApi,o=Object(a.jsxs)(ie.a,{children:[Object(a.jsx)(ie.a.Item,{children:Object(a.jsx)(Bt,{type:"text",map:t,vectorLayer:n,children:"Zoom All"})}),Object(a.jsx)(ie.a.Item,{children:Object(a.jsx)(Ut,{type:"text",map:t,gridApi:r,children:"Zoom to Selected Feature(s)"})})]}),i=Object(a.jsxs)(ie.a,{children:[Object(a.jsx)(ie.a.Item,{children:Object(a.jsx)(ft,{type:"text",vectorLayer:n,children:"Clear All"})}),Object(a.jsx)(ie.a.Item,{children:Object(a.jsx)(Zt,{type:"text",gridApi:r,vectorLayer:n,children:"Clear Selected Feature(s)"})})]});return Object(a.jsx)(c.a.Fragment,{children:Object(a.jsxs)(we.b,{children:[Object(a.jsx)(Dt.a,{overlay:i,placement:"bottomLeft",children:Object(a.jsx)(fe.a,{children:"Clear"})}),Object(a.jsx)(Dt.a,{overlay:o,placement:"bottomLeft",children:Object(a.jsx)(fe.a,{children:"Zoom"})})]})})},Ht=(n(431),n(432),function(e){return e.ol_uid}),Wt=[],Xt=function(e){var t=e.map,n=e.vectorLayer,c=e.zoomToLayer,o=void 0===c||c,i=e.columnDefs,u=void 0===i?Wt:i,b=e.rowSelection,j=void 0===b?"multiple":b,d=e.featureStyle,O=void 0===d?new gt.c({stroke:new zt.a({color:"rgba(0, 0, 255, 0.4)",width:2}),fill:new vt.a({color:"rgba(97, 218, 251, 0.4)"}),image:new yt.a({radius:8,fill:new vt.a({color:"rgba(97, 218, 251, 1.0)"}),stroke:new zt.a({color:"#000",width:2})})}):d,f=e.selectedFeatureStyle,m=void 0===f?new gt.c({stroke:new zt.a({color:"rgba(0, 0, 0, 1.0)",width:3}),fill:new vt.a({color:"rgba(0, 0, 255, 0.5)"}),image:new yt.a({radius:10,fill:new vt.a({color:"rgba(0, 0, 255, 1.0)"}),stroke:new zt.a({color:"#000",width:2})}),zIndex:100}):f,p=e.keyFunc,h=void 0===p?Ht:p,g=e.className,v=void 0===g?"ag-theme-balham":g,x=e.onGridReady,w=e.onRowClicked,S=e.onSelectionChanged,C=Object(s.a)(e,["map","vectorLayer","zoomToLayer","columnDefs","rowSelection","featureStyle","selectedFeatureStyle","keyFunc","className","onGridReady","onRowClicked","onSelectionChanged"]);u||(u=[]);var k=Object(r.useState)([]),L=Object(y.a)(k,2),E=L[0],F=L[1],T=Object(r.useState)([]),R=Object(y.a)(T,2),N=R[0],I=R[1],P=Object(r.useState)(null),A=Object(y.a)(P,2),_=A[0],G=A[1],M=Object(r.useState)(),V=Object(y.a)(M,2)[1],z=Object(r.useCallback)((function(e){return e.key}),[]),q=Object(r.useCallback)((function(e){var t=[];return e.forEach((function(e){var n=e.getProperties(),a=Object.keys(n).filter((function(e){return!(n[e]instanceof Rt.a)})).reduce((function(e,t){return e[t]=n[t],e}),{});t.push(Object(l.a)({key:h(e),__feature:e},a))})),t}),[h]),D=Object(r.useCallback)((function(e){if(!e)return[];var t=e.getSource().getFeatures();return q(t)}),[q]),B=Object(r.useCallback)((function(e){var t=e.target,n=e.key,a=t.get(n),r=_.getRowNode(h(t));r&&(r.setDataValue(n,a),E.find((function(e){return e.key===h(t)}))[n]=a,F(Object(St.a)(E)))}),[_,E,h]),U=Object(r.useCallback)((function(e){e.forEach((function(e){e.on("propertychange",B)}))}),[B]),Z=Object(r.useCallback)((function(e){e.forEach((function(e){e.un("propertychange",B)}))}),[B]),Y=Object(r.useCallback)((function(e){var t=e.feature;t.on("propertychange",B);var n=q([t]);_.applyTransaction({add:n}),_.refreshClientSideRowModel("filter")}),[q,_,B]),H=Object(r.useCallback)((function(e){var t=e.feature;t.un("propertychange",B);var n=_.getRowNode(h(t));n&&_.applyTransaction({remove:[n.data]})}),[_,h,B]),W=Object(r.useCallback)((function(e){_.setRowData([])}),[_]),X=Object(r.useCallback)((function(e){e&&(e.getSource().on("addfeature",Y),e.getSource().on("removefeature",H),e.getSource().on("clear",W))}),[Y,H,W]),Q=Object(r.useCallback)((function(e){e&&(e.getSource().un("addfeature",Y),e.getSource().un("removefeature",H),e.getSource().un("clear",W))}),[Y,H,W]),K=Object(r.useCallback)((function(e){G(e.api),V(e.columnApi),x&&x(e)}),[x]),J=Object(r.useCallback)((function(e){var t=(_?_.getSelectedRows():e.api.getSelectedRows()).map((function(e){return e.__feature}));N.forEach((function(e){t.includes(e)||e.setStyle(null)})),t.forEach((function(e){N.includes(e)||e.setStyle(m)})),I(t),S&&S(e)}),[N,m,_,S]);return Object(r.useEffect)((function(){o&&n&&n.getSource().getFeatures().length>0&&te(t,n)}),[t,o,n]),Object(r.useEffect)((function(){n&&O&&n.setStyle(O)}),[O,n]),Object(r.useEffect)((function(){!function(e,t){if(0===e.length&&t&&t.getSource().getFeatures().length>0){var n=t.getSource().getFeatures();if(n&&n.length>0){var a=n[0],r=a.getProperties();for(var c in r)c!==a.getGeometryName()&&e.push({field:c,sortable:!0,filter:!0,resizable:!0})}}}(u,n);var e=D(n);F(e)}),[u,D,n]),Object(r.useEffect)((function(){return n&&U(n.getSource().getFeatures()),function(){n&&Z(n.getSource().getFeatures())}}),[U,Z,n]),Object(r.useEffect)((function(){return n&&X(n),function(){n&&Q(n)}}),[X,Q,n]),Object(a.jsx)(qt.AgGridReact,Object(l.a)(Object(l.a)({className:v,onGridReady:K,onSelectionChanged:J,onRowClicked:w,rowSelection:j,enableCellTextSelection:!0,getRowNodeId:z,immutableData:!0,defaultColDef:{sortable:!0,resizable:!0,filter:!0,headerComponentParams:{menuIcon:"fa-bars"}},rowData:E},C),{},{children:u.map((function(e,t){return Object(a.jsx)(qt.AgGridColumn,{field:"field"in e?e.field:null,headerName:"headerName"in e?e.headerName:null},String(t))}))}))};Xt.MenuBar=Yt;var Qt=Xt,Kt=n(262),Jt=n(452),$t=n(78),en=n(311),tn=n(130),nn=n(40),an=n(205),rn=function(){var e=Object(r.useState)(!1),t=Object(y.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),o=Object(y.a)(c,2),i=o[0],s=o[1];return{sendRequest:Object(r.useCallback)((function(e,t,n,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{method:"POST",contentType:"application/xml"},o=(new en.a).writeGetFeature(r),i=(new XMLSerializer).serializeToString(o);console.log("WFS GetFeature Request: "),console.log(i),a(!0),s(null),c=Object(l.a)(Object(l.a)({},c),{},{method:"POST",contentType:"application/xml",body:i}),fetch(e,c).then((function(e){if(!e.ok)throw new Error(e);return e.text()})).then((function(e){console.log("WFS GetFeature Response:",e);var t=null,c=r.outputFormat;switch(c&&(c=c.toUpperCase()),c){case"APPLICATION/JSON":t=new Ct.a;break;case"GML2":t=new tn.a;break;case"GML3":t=new nn.a;break;case"GML32":t=new an.a;break;default:t=new nn.a}var o=t.readFeatures(e);n.getSource().addFeatures(o),a(!1)})).catch((function(e){alert(e.message),s(e.message),a(!1)}))}),[]),clearRequest:Object(r.useCallback)((function(){a(!1),s(null)}),[]),isLoading:n,error:i}},cn=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current},on=function(e){var t=e.url,n=e.layer,c=e.map,o=e.wfsOptions,i=e.columnDefs,s=Object(r.useState)(i),u=Object(y.a)(s,2),b=u[0],j=u[1],d=Object(r.useState)(""),O=Object(y.a)(d,2),f=O[0],m=O[1],p=Object(r.useState)(""),h=Object(y.a)(p,2),g=h[0],v=h[1],x=Object(r.useState)(""),w=Object(y.a)(x,2),S=w[0],C=w[1],k=Object(r.useState)("equal_to"),L=Object(y.a)(k,2),E=L[0],F=L[1],T=Object(r.useState)(!1),R=Object(y.a)(T,2),N=R[0],I=R[1],P=Object(r.useState)(!0),A=Object(y.a)(P,2),_=A[0],G=A[1],M=rn();i!==cn(i)&&i!==b&&(j(i),i.length>0&&m(i[0].field));var V=Object(r.useCallback)((function(e){if(n){n.getSource().clear();var a=null;switch(E){case"equal_to":a=Object($t.d)(f,g,_);break;case"not_equal_to":a=Object($t.m)(f,g,_);break;case"like":a=Object($t.k)(f,g,"*",".","!",_);break;case"is_null":a=Object($t.h)(f);break;case"greater_than":a=Object($t.e)(f,g);break;case"greater_than_or_equal_to":a=Object($t.f)(f,g);break;case"less_than":a=Object($t.i)(f,g);break;case"less_than_or_equal_to":a=Object($t.j)(f,g);break;case"between":a=Object($t.c)(f,g,S);break;default:a=null}N&&(a=Object($t.l)(a));var r=Object(l.a)(Object(l.a)({},o),{},{filter:a});M.sendRequest(t,c,n,r)}}),[M,n,t,o,E,f,g,_,N,c,S]),z=Object(r.useCallback)((function(e){F(e)}),[]),q=Object(r.useCallback)((function(e){I(e)}),[]),D=Object(r.useCallback)((function(e){G(e)}),[]),B=Object(r.useCallback)((function(e){m(e)}),[]),U=Object(r.useCallback)((function(e){v(e.target.value)}),[]),Z=Object(r.useCallback)((function(e){C(e.target.value)}),[]),Y=null;"equal_to"!==E&&"not_equal_to"!==E&&"like"!==E||(Y=Object(a.jsx)(Jt.a,{checkedChildren:"Match Case",unCheckedChildren:"NO Match Case",defaultChecked:_,onChange:D}));var H=null;return"between"===E&&(H=Object(a.jsxs)(we.b,{children:[Object(a.jsx)("b",{children:"AND"}),Object(a.jsx)(Te.a,{placeholder:"Property Value",onChange:Z,onPressEnter:V})]})),Object(a.jsxs)(we.b,{children:[Object(a.jsx)(fe.a,{type:"primary",loading:M.isLoading,onClick:V,children:"Search"}),Object(a.jsx)(Gt.a,{style:{width:200},value:f,onChange:B,children:i.map((function(e,t){return Object(a.jsx)(Gt.a.Option,{value:e.field,children:e.field},t)}))}),Object(a.jsx)(Jt.a,{checkedChildren:"Not",defaultChecked:N,onChange:q}),Object(a.jsxs)(Gt.a,{defaultValue:E,style:{width:200},onChange:z,children:[Object(a.jsx)(Gt.a.Option,{value:"equal_to",children:"Equal To"}),Object(a.jsx)(Gt.a.Option,{value:"not_equal_to",children:"Not Equal To"}),Object(a.jsx)(Gt.a.Option,{value:"like",children:"Like"}),Object(a.jsx)(Gt.a.Option,{value:"is_null",children:"Is Null"}),Object(a.jsx)(Gt.a.Option,{value:"greater_than",children:"Greater Than"}),Object(a.jsx)(Gt.a.Option,{value:"greater_than_or_equal_to",children:"Greater Than or Equal To"}),Object(a.jsx)(Gt.a.Option,{value:"less_than",children:"Less Than"}),Object(a.jsx)(Gt.a.Option,{value:"less_than_or_equal_to",children:"Less Than or Equal To"}),Object(a.jsx)(Gt.a.Option,{value:"between",children:"Between"})]}),Object(a.jsx)(Te.a,{placeholder:"Property Value",onChange:U,onPressEnter:V}),H,Y]})},ln=function(e){var t=e.url,n=e.map,c=e.vectorLayer,o=e.wfsOptions,i=e.fetchOptions,u=e.msg,b=Object(s.a)(e,["url","map","vectorLayer","wfsOptions","fetchOptions","msg"]),j=o.geometryName,d=wt(n,u),O=d.start,f=d.clear,m=d.geometry,p=d.isRunning,h=rn(),g=n.getView().getProjection(),v=g.getCode();"neu"===g.getAxisOrientation()&&(v="urn:x-ogc:def:crs:"+v),o.srsName=v;var y=Object(r.useCallback)((function(e){O()}),[O]);return Object(r.useEffect)((function(){if(m&&!p){c.getSource().clear();var e=m,a=Object($t.g)(j,e,v),r=Object(l.a)(Object(l.a)({},o),{},{filter:a});h.sendRequest(t,n,c,r,i),f()}}),[m,p,c,j,v,n,t,h,o,i,f]),Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({},b),{},{onClick:y,disabled:p,loading:h.isLoading,children:b.children}))},sn=function(e){var t=e.url,n=e.layer,r=e.map,c=e.wfsOptions;return Object(a.jsx)(ln,{type:"primary",url:t,map:r,vectorLayer:n,wfsOptions:c,children:"Search by Point"})},un=n(55),bn=n(179),jn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Ctrl + Pick and drag to draw BBox or &lt;esc&gt; to Cancel",n=Object(r.useState)(null),a=Object(y.a)(n,2),c=a[0],o=a[1],i=Object(r.useCallback)((function(e){}),[]),l=Object(r.useCallback)((function(e){}),[]),s=Object(r.useCallback)((function(e){}),[]),u=Object(r.useCallback)((function(e,t){var n=new bn.a({condition:un.h});return n.on("boxstart",i),n.on("boxdrag",l),n.on("boxend",(function(e){o(n.getGeometry()),m(!1)})),n.on("boxcancel",s),n.setActive(!1),n}),[i,l,s]),b=Object(r.useCallback)((function(){var e=document.createElement("div");return e.className="tooltip-hidden",new pt.a({element:e,offset:[15,0],positioning:"center-left"})}),[]),j=Object(r.useState)(b())[0],d=Object(r.useState)(!1),O=Object(y.a)(d,2),f=O[0],m=O[1],p=Object(r.useState)(u(e,new T.a))[0],h=Object(r.useCallback)((function(){j&&j.getElement()&&(j.getElement().innerHTML="",j.getElement().className="tooltip-hidden")}),[j]),g=Object(r.useCallback)((function(e){e.dragging||(j&&j.getElement()&&(j.getElement().innerHTML=t,j.getElement().className="tooltip"),j&&j.setPosition(e.coordinate))}),[j,t]),v=Object(r.useCallback)((function(){m(!0)}),[]),x=Object(r.useCallback)((function(){m(!1)}),[]),w=Object(r.useCallback)((function(){o(null)}),[]),S=Object(r.useCallback)((function(e){27===e.keyCode&&x()}),[x]),C=Object(r.useCallback)((function(){document.removeEventListener("keydown",S),p.setActive(!1),e.removeOverlay(j),e.getViewport().removeEventListener("mouseout",h),e.un("pointermove",g),h()}),[p,e,j,S,h,g]);return Object(r.useEffect)((function(){return f?(document.addEventListener("keydown",S),p.setActive(!0),e.addOverlay(j),e.getViewport().addEventListener("mouseout",h),e.on("pointermove",g)):C(),function(){C()}}),[f,p,e,j,C,g,h,S]),Object(r.useEffect)((function(){return e.addInteraction(p),function(){e.removeInteraction(p)}}),[u,p,e]),{start:v,stop:x,clear:w,geometry:c,isRunning:f}},dn=function(e){var t=e.url,n=e.map,c=e.vectorLayer,o=e.wfsOptions,i=e.fetchOptions,u=e.msg,b=Object(s.a)(e,["url","map","vectorLayer","wfsOptions","fetchOptions","msg"]),j=o.geometryName,d=o.srsName,O=jn(n,u),f=O.start,m=O.clear,p=O.geometry,h=O.isRunning,g=rn(),v=Object(r.useCallback)((function(e){f()}),[f]);return Object(r.useEffect)((function(){if(p&&!h){c.getSource().clear();var e=p,a=Object($t.b)(j,e.getExtent(),d),r=Object(l.a)(Object(l.a)({},o),{},{filter:a});g.sendRequest(t,n,c,r,i),m()}}),[p,h,c,j,d,n,t,g,o,i,m]),Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({},b),{},{onClick:v,disabled:h,loading:g.isLoading,children:b.children}))},On=function(e){var t=e.url,n=e.layer,r=e.map,c=e.wfsOptions;return Object(a.jsx)(dn,{type:"primary",url:t,map:r,vectorLayer:n,wfsOptions:c,children:"Search by BBox"})},fn=n(231),mn=new gt.c({fill:new vt.a({color:"rgba(255, 0, 0, 0.4)"}),stroke:new zt.a({color:"#ff0000",width:3}),image:new yt.a({radius:7,fill:new vt.a({color:"#ff0000"})})}),pn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Pick Points to Draw Polygon or &lt;esc&gt; to Cancel",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mn,a=Object(r.useState)(null),c=Object(y.a)(a,2),o=c[0],i=c[1],l=Object(r.useCallback)((function(e){}),[]),s=Object(r.useCallback)((function(e){e.feature&&e.feature.getGeometry()!==o&&i(e.feature.getGeometry()),h(!1)}),[o]),u=Object(r.useCallback)((function(){}),[]),b=Object(r.useCallback)((function(e,t){var a=new ht.a({source:t,type:"Polygon",style:n});return a.on("drawend",s),a.on("drawstart",l),a.on("drawabort",u),a.setActive(!1),a}),[s,l,u,n]),j=Object(r.useCallback)((function(e,t){var n=new fn.a({source:t});return n.setActive(!1),n}),[]),d=Object(r.useState)(b(e,new T.a))[0],O=Object(r.useState)(j(e,new T.a))[0],f=Object(r.useState)(!1),m=Object(y.a)(f,2),p=m[0],h=m[1],g=Object(r.useCallback)((function(){var e=document.createElement("div");return e.className="tooltip-hidden",new pt.a({element:e,offset:[15,0],positioning:"center-left"})}),[]),v=Object(r.useState)(g())[0],x=Object(r.useCallback)((function(){v&&v.getElement()&&(v.getElement().innerHTML="",v.getElement().className="tooltip-hidden")}),[v]),w=Object(r.useCallback)((function(e){e.dragging||(v&&v.getElement()&&(v.getElement().innerHTML=t,v.getElement().className="tooltip"),v&&v.setPosition(e.coordinate))}),[v,t]),S=Object(r.useCallback)((function(){h(!0)}),[]),C=Object(r.useCallback)((function(){h(!1)}),[]),k=Object(r.useCallback)((function(e){27===e.keyCode&&C()}),[C]),L=Object(r.useCallback)((function(){i(null)}),[]),E=Object(r.useCallback)((function(){document.removeEventListener("keydown",k),d.setActive(!1),O.setActive(!1),e.removeOverlay(v),e.getViewport().removeEventListener("mouseout",x),e.un("pointermove",w),x()}),[d,e,v,O,w,x,k]);return Object(r.useEffect)((function(){return p?(document.addEventListener("keydown",k),d.setActive(!0),O.setActive(!0),e.addOverlay(v),e.getViewport().addEventListener("mouseout",x),e.on("pointermove",w)):E(),function(){E()}}),[p,d,e,v,O,E,w,x,k]),Object(r.useEffect)((function(){return e.addInteraction(d),e.addInteraction(O),function(){e.removeInteraction(d),e.removeInteraction(O)}}),[b,d,O,e]),{start:S,stop:C,clear:L,geometry:o,isRunning:p}},hn=function(e){var t=e.url,n=e.map,c=e.vectorLayer,o=e.wfsOptions,i=e.fetchOptions,u=e.msg,b=Object(s.a)(e,["url","map","vectorLayer","wfsOptions","fetchOptions","msg"]),j=o.geometryName,d=pn(n,u),O=d.start,f=d.clear,m=d.geometry,p=d.isRunning,h=rn(),g=n.getView().getProjection(),v=g.getCode();"neu"===g.getAxisOrientation()&&(v="urn:x-ogc:def:crs:"+v),o.srsName=v;var y=Object(r.useCallback)((function(e){O()}),[O]);return Object(r.useEffect)((function(){if(m&&!p){c.getSource().clear();var e=m,a=Object($t.g)(j,e,v),r=Object(l.a)(Object(l.a)({},o),{},{filter:a});h.sendRequest(t,n,c,r,i),f()}}),[m,p,c,j,v,n,t,h,o,i,f]),Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({},b),{},{onClick:y,disabled:p,loading:h.isLoading,children:b.children}))},gn=function(e){var t=e.url,n=e.layer,r=e.map,c=e.wfsOptions;return Object(a.jsx)(hn,{type:"primary",url:t,map:r,vectorLayer:n,wfsOptions:c,children:"Search by Polygon"})},vn=function(e){var t=e.url,n=e.layer,c=e.map,o=e.wfsOptions,i=Object(r.useState)(""),s=Object(y.a)(i,2),u=s[0],b=s[1],j=rn(),d=Object(r.useCallback)((function(e){b(e.target.value)}),[]),O=Object(r.useCallback)((function(e){if(n){n.getSource().clear();var a=Object(l.a)(Object(l.a)({},o),{},{cql_filter:u});j.sendRequest(t,c,n,a)}}),[n,u,o,j,c,t]);return Object(a.jsxs)(we.b,{children:[Object(a.jsx)(fe.a,{type:"primary",loading:j.isLoading,onClick:O,children:"Search by CQL"}),Object(a.jsx)(Te.a,{placeholder:"CQL Filter",onChange:d,onPressEnter:O,style:{width:800}})]})},yn=function(e){var t=e.map,n=e.layer,c=e.url,o=e.wfsOptions,i=e.columnDefs,l=Object(r.useState)(1),s=Object(y.a)(l,2),u=s[0],b=s[1],j={display:"block",height:"30px",lineHeight:"50px"},d=null;switch(u){case 1:d=Object(a.jsx)(on,{url:c,map:t,layer:n,wfsOptions:o,columnDefs:i});break;case 2:d=Object(a.jsx)(sn,{url:c,map:t,layer:n,wfsOptions:o});break;case 3:d=Object(a.jsx)(On,{url:c,map:t,layer:n,wfsOptions:o});break;case 4:d=Object(a.jsx)(gn,{url:c,map:t,layer:n,wfsOptions:o});break;case 5:d=Object(a.jsx)(vn,{url:c,map:t,layer:n,wfsOptions:o});break;case 6:d=null;break;default:d=null}var O=Object(a.jsx)(ie.a,{children:Object(a.jsx)(ie.a.Item,{children:Object(a.jsxs)(Kt.a.Group,{onChange:function(e){b(e.target.value)},value:u,children:[Object(a.jsx)(Kt.a,{style:j,value:1,children:"By Property"}),Object(a.jsx)(Kt.a,{style:j,value:2,children:"By Point"}),Object(a.jsx)(Kt.a,{style:j,value:3,children:"By BBox"}),Object(a.jsx)(Kt.a,{style:j,value:4,children:"By Polygon"}),Object(a.jsx)(Kt.a,{style:j,value:5,disabled:!0,children:"By CQL"})]})})});return Object(a.jsxs)(we.b,{children:[Object(a.jsx)(Dt.a,{overlay:O,placement:"bottomLeft",children:Object(a.jsx)(fe.a,{children:"Search Type"})}),Object(a.jsx)(Se.a,{type:"vertical"}),d]})},xn=n(283),wn=n.n(xn),Sn=n(312),Cn=function(){var e=Object(r.useState)(!1),t=Object(y.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),o=Object(y.a)(c,2),i=o[0],l=o[1],s=Object(r.useState)(null),u=Object(y.a)(s,2),b=u[0],j=u[1];return{sendRequest:Object(r.useCallback)(function(){var e=Object(Sn.a)(wn.a.mark((function e(t,n){var r,c,o,i=arguments;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=i.length>2&&void 0!==i[2]?i[2]:{version:"1.1.0",exceptions:"application/vnd.ogc.se_xml",outputFormat:"application/json"},c=i.length>3&&void 0!==i[3]?i[3]:{method:"GET"},o="1.1.0"===r.version||"1.0.0"===r.version?"typeName":"typeNames",t=t+"?service=wfs&request=DescribeFeatureType&version="+r.version+"&"+o+"="+n+"&outputFormat="+r.outputFormat+"&exceptions="+r.exceptions,a(!0),l(null),j(null),fetch(t,c).then((function(e){if(!e.ok)throw new Error(e);return e.json()})).then((function(e){a(!1),j(e)})).catch((function(e){l(e.message),a(!1)}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),clearRequest:Object(r.useCallback)((function(){a(!1),l(null),j(null)}),[]),isLoading:n,data:b,error:i}},kn=function(e){return e.ol_uid},Ln=[],En=function e(t){var n=t.url,c=t.wfsOptions,o=t.fetchOptions,i=t.map,u=t.vectorLayer,b=t.zoomToLayer,j=void 0===b||b,d=t.columnDefs,O=void 0===d?Ln:d,f=t.rowSelection,m=void 0===f?"multiple":f,p=t.featureStyle,h=t.selectedFeatureStyle,g=t.className,v=void 0===g?"ag-theme-balham":g,x=t.keyFunc,w=void 0===x?kn:x,S=t.onSelectionChanged,C=t.onGridReady,k=t.onRowClicked,L=Object(s.a)(t,["url","wfsOptions","fetchOptions","map","vectorLayer","zoomToLayer","columnDefs","rowSelection","featureStyle","selectedFeatureStyle","className","keyFunc","onSelectionChanged","onGridReady","onRowClicked"]),E=Cn(),F=E.isLoading,T=E.data,R=E.error,N=E.sendRequest,I=Object(r.useState)(null),P=Object(y.a)(I,2),A=P[0],_=P[1],G=Object(r.useState)(O),M=Object(y.a)(G,2),V=M[0],z=M[1],q=Object(r.useCallback)((function(e){_(e.api),C&&C(e)}),[C]);return Object(r.useEffect)((function(){var e=c.featureTypes[0];"featurePrefix"in c&&(e=c.featurePrefix+":"+e),N(n,e)}),[N,n,c]),Object(r.useEffect)((function(){if((!V||0===V.length)&&T&&!F&&!R){var e=function(e){var t=[];return e&&"featureTypes"in e&&e.featureTypes[0].properties.forEach((function(e){e.type.includes("gml")||t.push({field:e.name,sortable:!0,filter:!0,resizable:!0})})),t}(T);z(e)}}),[V,u,T,F,R]),Object(a.jsxs)("div",{style:{height:"100%",width:"100%"},children:[Object(a.jsxs)(we.b,{wrap:!0,children:[Object(a.jsx)(Qt.MenuBar,{map:i,layer:u,gridApi:A}),Object(a.jsx)(Se.a,{type:"vertical"}),Object(a.jsx)(e.SearchMenuBar,{map:i,layer:u,url:n,wfsOptions:c,fetchOptions:o,columnDefs:V})]}),Object(a.jsx)(Qt,Object(l.a)({map:i,vectorLayer:u,zoomToLayer:j,columnDefs:V,rowSelection:m,featureStyle:p,selectedFeatureStyle:h,keyFunc:w,onGridReady:q,onSelectionChanged:S,onRowClicked:k,className:v},L))]})};En.SearchMenuBar=yn;var Fn=En,Tn=n(447),Rn=function(e){var t=e.title,n=void 0===t?"Zoom Center":t,c=e.visible,o=void 0===c||c,i=e.onClose,l=e.map,s=e.defaultScale,u=void 0===s?500:s,b=e.projs,j=void 0===b?[l.getView().getProjection()]:b,d=e.style,O=Object(r.useState)(l.getView().getProjection().getCode()),f=Object(y.a)(O,2),m=f[0],p=f[1],h=Object(r.useState)(void 0),g=Object(y.a)(h,2),v=g[0],w=g[1],S=Object(r.useState)(u),C=Object(y.a)(S,2),k=C[0],L=C[1],E=Object(r.useCallback)((function(e){var t=re(v,m);w(t?ae(t,m,e):void 0),p(e)}),[m,v]),F=Object(r.useCallback)((function(){var e=re(v,m),t=l.getView().getProjection().getCode();e&&(m!==t&&(e=Object(x.v)(e,m,t)),function(e,t,n,a){var r=$(e,t);e.getView().setCenter([n,a]),e.getView().setResolution(r)}(l,k,e[0],e[1]))}),[l,m,v,k]);return Object(a.jsx)(Ce,{title:n,collapsible:!0,onClose:i,visible:o,style:d,children:Object(a.jsxs)(we.b,{direction:"vertical",children:[Object(a.jsx)(Gt.a,{defaultValue:m,onChange:E,children:j.map((function(e){return Object(a.jsx)(Gt.a.Option,{value:e.getCode(),children:e.getCode()},e.getCode())}))}),Object(a.jsx)(Te.a,{addonBefore:ce(m),placeholder:"neu"!==Object(Q.c)(m).getAxisOrientation()?"X, Y":"Y, X",style:{width:400},value:v,onChange:function(e){w(e.target.value)}}),Object(a.jsx)(Re.a,{defaultValue:u,value:k,step:100,min:10,formatter:function(e){return"1/".concat(e)},parser:function(e){if(e&&2===e.split("/").length)return e.split("/")[1].trim()},placeholder:"1/Scale",onChange:function(e){L(e)},style:{width:400}}),Object(a.jsx)(fe.a,{type:"primary",onClick:F,children:"Zoom"})]})})},Nn=function(e){var t=e.map,n=e.projs,o=e.wndStyle,i=e.children,u=Object(s.a)(e,["map","projs","wndStyle","children"]),b=Object(r.useState)(!1),j=Object(y.a)(b,2),d=j[0],O=j[1];return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({},u),{},{onClick:function(e){O(!0)},disabled:d,children:i})),d&&Object(a.jsx)(Rn,{title:i,onClose:function(){O(!1)},visible:d,map:t,projs:n,style:o})]})},In=(n(433),function(e){var t=e.title,n=void 0===t?"About":t,r=e.visible,c=void 0!==r&&r,o=e.onOk,i=Object(s.a)(e,["title","visible","onOk"]);return Object(a.jsx)(Ce,Object(l.a)(Object(l.a)({title:n,collapsible:!0,onOk:o,visible:c},i),{},{children:Object(a.jsxs)("div",{className:"rolext-about-wnd",children:[Object(a.jsx)("h1",{children:"React-OlExt 0.1 Beta"}),Object(a.jsx)("h2",{children:"Components for Building Web Map Applications"})]})}))}),Pn=function(e){var t=e.wndStyle,n=e.children,o=void 0===n?"About":n,i=Object(s.a)(e,["wndStyle","children"]),u=Object(r.useState)(!1),b=Object(y.a)(u,2),j=b[0],d=b[1],O=Object(r.useCallback)((function(){d(!1)}),[]),f=Object(r.useCallback)((function(){d(!0)}),[]);return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(fe.a,Object(l.a)(Object(l.a)({onClick:f},i),{},{children:o})),j&&Object(a.jsx)(In,{onClose:O,style:t,visible:j})]})},An=(n(434),n(435),n(436),function(){_n.updateSize(),zn.updateSize(),zn.getView().setCenter(_n.getView().getCenter()),zn.getView().set("resolution",Dn*_n.getView().getResolution())}),_n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{projection:"EPSG:31370",center:[17e4,135e3],zoom:9},t=new U.a({name:"OSM",source:new Z.a,zIndex:0}),n={controls:Object(q.a)({attribution:!1}).extend([new D.a({units:"metric"})]),interactions:Object(B.a)({constrainResolution:!1}),view:new V.a(e),layers:[t],overlays:[]};return new z.a(n)}({projection:"EPSG:31370",center:[157257,172012],zoom:18}),Gn=function(e){var t=new de.a({name:"GRB Parcels",visible:!1,source:new ke.a({url:"https://geoservices.informatievlaanderen.be/raadpleegdiensten/Adpf/wms",params:{STYLES:"",LAYERS:"Adpf",INFO_FORMAT:"application/vnd.esri.wms_featureinfo_xml"}})}),n=new de.a({name:"GRB Realized Buildings",source:new ke.a({url:"https://geoservices.informatievlaanderen.be/raadpleegdiensten/Gebouwenregister/wms",params:{STYLES:"",LAYERS:"G_GEREALISEERD",INFO_FORMAT:"application/vnd.esri.wms_featureinfo_xml"}})}),a=new de.a({name:"GRB Addresses",visible:!1,source:new ke.a({url:"https://geoservices.informatievlaanderen.be/raadpleegdiensten/Adressen/wms",params:{STYLES:"",LAYERS:"Adrespos",INFO_FORMAT:"application/vnd.esri.wms_featureinfo_xml"}})}),r=new Y.b({name:"WMS Flemish Layers",layers:[t,n,a]});return e.addLayer(r),r}(_n),Mn=function(e){var t=new F.a({name:"WFS Flemish Addresses",source:new T.a});return e.addLayer(t),t}(_n),Vn={srsName:"EPSG:31370",featureNS:"informatievlaanderen.be/Adressen",featurePrefix:"Adressen",featureTypes:["Adrespos"],geometryName:"adrespositie",outputFormat:"application/json",maxFeatures:200},zn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.getView();if(!t){var a=new U.a({source:new Z.a,zIndex:0});t=[a]}var r=new z.a({controls:new E.a,interactions:Object(B.a)({constrainResolution:!1,doubleClickZoom:!1,dragAndDrop:!1,dragPan:!1,keyboardPan:!1,keyboardZoom:!1,mouseWheelZoom:!1,pointer:!1,select:!1}),view:new V.a({center:n.getCenter(),zoom:n.getZoom(),projection:n.getProjection()})});return t.forEach((function(e){r.addLayer(e)})),r}(_n),qn=[_n.getView().getProjection(),Object(x.m)("EPSG:4326")],Dn=5,Bn=function(){return Object(a.jsxs)(M,{split:"horizontal",minSize:0,maxSize:150,defaultSize:150,onDragFinished:An,children:[Object(a.jsxs)(we.b,{direction:"vertical",style:{width:"100%",minWidth:"100%",maxWidth:"100%"},children:[Object(a.jsx)(S,{map:_n}),Object(a.jsxs)(ie.a,{mode:"horizontal",children:[Object(a.jsx)(ie.a.Item,{children:Object(a.jsx)(Vt,{type:"primary",map:_n,projs:[_n.getView().getProjection(),Object(x.m)("EPSG:4326")],children:"Get Coordinate"})},"2"),Object(a.jsx)(ie.a.Item,{children:Object(a.jsx)(Nn,{type:"primary",map:_n,projs:qn,children:"Zoom Center"})},"3"),Object(a.jsx)(ie.a.Item,{children:Object(a.jsx)(Be,{type:"primary",map:_n,wndStyle:{visibility:"visible",width:700,maxHeight:500},children:"New WMS Layer"})},"5"),Object(a.jsx)(ie.a.Item,{children:Object(a.jsx)($e,{type:"primary",map:_n,wndStyle:{visibility:"visible",width:700,maxHeight:500},children:"New Group Layer"})},"6"),Object(a.jsx)(ie.a.Item,{children:Object(a.jsx)(Pn,{type:"primary"})},"4"),Object(a.jsx)(ie.a.Item,{children:Object(a.jsx)(It,{icon:Object(a.jsx)(Tn.a,{style:{fontSize:20}}),shape:"circle",type:"primary",style:{backgroundColor:"red"},map:_n,layers:Gn.getLayers().getArray(),wndStyle:{width:600}})},"1")]})]}),Object(a.jsxs)(M,{split:"horizontal",defaultSize:250,primary:"second",onDragFinished:An,children:[Object(a.jsxs)(M,{split:"vertical",defaultSize:250,onDragFinished:An,children:[Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)(_t,{map:_n})}),Object(a.jsxs)(M,{split:"vertical",primary:"second",defaultSize:350,maxSize:400,minSize:0,onDragFinished:An,children:[Object(a.jsx)(k,{map:_n}),Object(a.jsx)(_,{parentMap:_n,map:zn,magnification:Dn})]})]}),Object(a.jsx)(Fn,{url:"https://geoservices.informatievlaanderen.be/overdrachtdiensten/Adressen/wfs",wfsOptions:Vn,map:_n,vectorLayer:Mn})]})]})},Un=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,454)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(Bn,{})}),document.getElementById("root")),Un()}},[[437,1,2]]]);
//# sourceMappingURL=main.64d76868.chunk.js.map